<!DOCTYPE html>
<html lang="en">
  
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- <script src="https://cdn.jsdelivr.net/npm/improv-wifi-sdk@1.4.0/dist/launch-button.min.js"></script> -->
   <!-- <script src="https://unpkg.com/esp-web-tools@8.0.6/dist/web/install-button.js?module"></script> -->
  <!-- <script type="module">
  import improvWifiSdk from 'https://cdn.jsdelivr.net/npm/improv-wifi-sdk@1.4.0/+esm';
  </script> -->
  <title>Print Farm Button</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 0;
      /* Rainbow gradient background */
      min-height: 100vh;
      background: linear-gradient(135deg, #ff5e62 0%, #ff9966 20%, #f9d423 40%, #a8e063 60%, #43cea2 80%, #1976d2 100%);
      background-size: 200% 200%;
      animation: rainbow 8s ease-in-out infinite;
    }
    @keyframes rainbow {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    .hero {
      background: linear-gradient(135deg, #ff5e62 0%, #ff9966 20%, #f9d423 40%, #a8e063 60%, #43cea2 80%, #1976d2 100%);
      color: #fff;
      text-align: center;
      padding: 4em 1em 3em 1em;
      min-height: 60vh;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      animation: rainbow 8s ease-in-out infinite;
    }
    .hero-cta {
      display: inline-block;
      margin-top: 2em;
      background: #fff;
      color: #1976d2;
      font-weight: bold;
      padding: 0.75em 2em;
      border-radius: 30px;
      text-decoration: none;
      box-shadow: 0 2px 8px #0002;
      transition: background 0.2s, color 0.2s;
    }
    .hero-cta:hover {
      background: #1976d2;
      color: #fff;
    }
    .hero-logo {
      box-shadow: 0 2px 8px #0002;
      border-radius: 50%;
      background: #fff;
      padding: 0.5em;
    }
    .hero-desc {
      font-size: 1.1em;
      margin-bottom: 1.5em;
      color: #fff;
      opacity: 0.95;
    }
    .section {
      padding: 3em 1em 2em 1em;
      background: #fff;
    }
    .section.alt {
      background: #f9f9fb;
    }
    .section.info {
      background: #e3f2fd;
    }
    .section.footer {
      background: #222;
      color: #fff;
      padding: 2em 1em 1em 1em;
      font-size: 0.95em;
    }
    .container {
      max-width: 400px;
      margin: 0 auto;
      background: none;
      border-radius: 8px;
      box-shadow: none;
      padding: 0;
    }
    h1 { font-size: 1.5em; margin-bottom: 1em; }
    h2 { font-size: 1.2em; margin: 1.5em 0 1em; }
    label { display: block; margin-top: 1em; }
    input, button { width: 100%; padding: 0.5em; margin-top: 0.5em; }
    .status { margin-top: 1em; color: #007a00; }
    .error { color: #c00; }
    .printer-list { margin-top: 1.5em; }
    .printer-item { background: #f3f3f3; border-radius: 6px; padding: 1em; margin-bottom: 1em; box-shadow: 0 1px 3px #0001; }
    .printer-label { font-weight: bold; color: #1976d2; }
    .printer-id { color: #555; font-size: 0.95em; word-break: break-all; }
    hr { border: 0; height: 1px; background: #ddd; margin: 2em 0; }
    .provision-mode-toggle {
      display: flex;
      justify-content: center;
      gap: 1em;
      margin-bottom: 1.5em;
    }
    .mode-btn {
      background: #fff;
      color: #1976d2;
      font-weight: bold;
      padding: 0.5em 2em;
      border-radius: 30px;
      border: none;
      box-shadow: 0 2px 8px #0002;
      transition: background 0.2s, color 0.2s;
      cursor: pointer;
      outline: none;
    }
    .mode-btn.active, .mode-btn:focus {
      background: #1976d2;
      color: #fff;
    }
    .provision-form label {
      margin-top: 1em;
    }
    #manual-fields input {
      background: #f3f3f3;
    }
    /* Center the provision device button and apply new styling */
    #provision-device-btn {
      display: block;
      margin: 20px auto;
      padding: 10px 20px;
      background-color: #007BFF;
      color: white;
      border: none;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      transition: background-color 0.3s ease;
    }

    #provision-device-btn:hover {
      background-color: #0056b3;
    }

    /* Ensure the Improv WiFi SDK button is visible */
    #auto-fields {
      text-align: center;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <section class="hero">
    <div class="container">
      <img src="./images/logo.png" alt="PrintFarmButton Logo" class="hero-logo" style="width:100px;display:block;margin:0 auto 1em;">
      <h1>Print Farm Button</h1>
      <p class="hero-desc">Easily provision and manage your PrintFarmButton devices. Connect, configure, and control your 3D printer farm with ease.</p>
      <a href="#provision" class="hero-cta">Get Started</a>
    </div>
  </section>

  <section id="provision" class="section">
    <div class="container">
      <h2>WiFi Provisioning</h2>
      <div class="provision-mode-toggle">
        <button id="auto-mode-btn" class="mode-btn active" type="button">Automatic</button>
        <button id="manual-mode-btn" class="mode-btn" type="button">Manual</button>
      </div>
      <form id="provision-form" class="provision-form">

        <div id="auto-fields">
          <div class="install-container">
            <!-- <script type="module" src="https://cdn.jsdelivr.net/npm/improv-wifi-sdk@1.4.0/dist/launch-button.min.js"></script> -->
              <!-- <script src="./serial-launch-button.js" type="module"></script>             -->
                <script type="module" src="https://cdn.jsdelivr.net/npm/improv-wifi-serial-sdk@2.5.0/+esm"></script>

            <div class="button-row">
              <improv-wifi-serial-launch-button></improv-wifi-serial-launch-button>
            </div>
            <details style="margin:1.5em 0;">
              <summary style="cursor:pointer;font-weight:bold;">Privacy Info</summary>
              <p style="margin-top:1em;max-width:350px;margin-left:auto;margin-right:auto;">
                <strong>Privacy Notice:</strong> No data is stored or sent to any server. All WiFi credentials and device information remain on your computer and are only used within this webpage for device configuration. Your privacy and security are fully preserved.
              </p>
            </details>
          </div>
        </div>
        <div id="manual-fields" style="display:none;">
          <div class="instructions">
            <h3>Manual Wifi Configuration</h3>
            <li>Search for WiFi named <code>printfarm-xxxxxx</code></li>
            <li>Join WiFi</li>
            <li>Navigate to <code>http://192.168.4.1</code></li>
            <li>Select WiFi network</li>
          </ol>
        </div>
      </form>
      <div class="status" id="status"></div>
    </div>
  </section>

  <section class="section alt">
    <div class="container">
      <h2>Printago API Test</h2>
      <label>API Key
        <input type="text" id="api-key" placeholder="ApiKey ..." />
      </label>
      <label>Store ID
        <input type="text" id="store-id" placeholder="Store ID" />
      </label>
      <button id="fetch-printers">Fetch Printers</button>
      <div id="printer-list" class="printer-list"></div>
    </div>
  </section>

  <section class="section info">
    <div class="container">
      <h2>How It Works</h2>
      <ul style="text-align:left;max-width:350px;margin:1em auto;">
        <li>Connect your PrintFarmButton to WiFi using Improv Serial.</li>
        <li>Link your Printago account with your API Key and Store ID.</li>
        <li>Monitor and control your printers from anywhere.</li>
      </ul>
    </div>
  </section>

  <section class="section footer">
    <div class="container" style="text-align:center;">
      <p>&copy; 2025 PrintFarmButton &mdash; <a href="https://github.com/spuder/PrintFarmButton">GitHub</a></p>
    </div>
  </section>


  <script>
  const autoBtn = document.getElementById('auto-mode-btn');
  const manualBtn = document.getElementById('manual-mode-btn');
  const autoFields = document.getElementById('auto-fields');
  const manualFields = document.getElementById('manual-fields');
  autoBtn.onclick = () => {
    autoBtn.classList.add('active');
    manualBtn.classList.remove('active');
    autoFields.style.display = '';
    manualFields.style.display = 'none';
  };
  manualBtn.onclick = () => {
    manualBtn.classList.add('active');
    autoBtn.classList.remove('active');
    manualFields.style.display = '';
    autoFields.style.display = 'none';
  };
</script>

</body>
</html>
